# 模块化

## 一. 认识模块化

> 模块化就是一种约定，一种规范；
>
> 场景模拟：小强，小黄，小刚 共同基于 Node.js 开发项目！

1. 为什么要有模块化：**为了解决文件之间的依赖关系**；
2. 注意：**模块化是一种开发思想**；具体开发中需要定制符合实际需求的**模块化规范**！
3. 大家可以把模块化规范，认为是一种**明文的约定**，大家都按照相同的约定写代码，减少了不必要的沟通成本，极大方便了各个模块之间的调用，方便别人，同时也方便自己；



## 二. 了解CommonJs规范

1. 作用：是一套 Javascript 的模块化规范，规定了 **模块的特性** 和 **各模块之间如何相互依赖**；
2. 用途：Node.js 中使用了 CommonJS 规范；
3. 特点：**同步加载模块；** 不适合在浏览器端使用；
4. CommonJS规范都定义了哪些内容：[wiki 对于 Modules 的描述](http://wiki.commonjs.org/wiki/Modules/1.1)

## 三. 模块作用域 和 全局作用域

> 在Node.js中有两个作用域，分别是 全局作用域 和 模块作用域；

1. 全局作用域使用 `global` 来访问，类似于`浏览器中的window`；
2. 每个 Javascript 文件，都是一个单独模块，每个模块都有自己独立的作用域，因此：模块中的成员，默认无法被其它模块访问。



### 3.1 使用 global 全局作用域在模块之间共享成员

1. 如果在某个模块内部，想为 全局的 global 作用域挂载一些属性，需要显示的调用`global.***`来挂载；
2. 注意：在开发中，一般情况下，不推荐使用`global`全局作用域来共享成员，会存在全局变量污染问题；



### 3.2 模块作用域

1. **module（模块标识）**

   module 属性是 Common JS 规范中定义的，它是一个对象，表示当前这个具体的 js 模块；

2. **require（引用模块）**

   每一个实现了 CommonJS 规范的模块，必须定义一个 require() 函数，使用这个 require 函数，就能够 很方便的导入其它 模块中的成员，供自己使用；

3. **exports（暴露模块成员）**

   每一个模块中，如果想要把自己的一些私有成员，暴露给别人使用，那么，必须实现一个 exports 对象，通过exports对象，可以方便的把模块内私有的成员，暴露给外界使用；



### 3.3 module.exports 和 exports 的关系

1. `module.exports` 和 `exports` 默认引用了同一个空对象；
2. `module.exports` 和 `exports` 作用一致，都可以向外暴露成员；
3. 一个模块作用域中，向外暴露私有成员时，永远以 `module.exports` 为准；



## 四. 了解 - 浏览器端的 AMD 和 CMD 模块化规范

> 注意：浏览器端不能使用 CommonJS规范；因为 CommonJS 下，模块是同步加载的；

> AMD/CMD可以理解为是commonjs在浏览器端的解决方案，AMD/CMD下，模块都是异步加载的；

1. AMD模块化规范代表：RequireJS
   - 主要特性1：对于依赖的模块，AMD 是提前执行；
   - 主要特性2：推崇**依赖前置**；
2. CMD模块化规范代表：SeaJS
   - 主要特性1：对于依赖的模块，CMD 是延迟执行；CMD 推崇 as lazy as possible.
   - 主要特性2：推崇**依赖就近**；
3. ES6的模块化（**大趋势**）：es6是在**语言标准层面上**，实现了模块功能，而且实现得相当简单，**完全可以取代 CommonJS 和 AMD 规范，成为浏览器和服务器通用的模块解决方案**；



## 五. nodeJs中的模块和包的概念

### 5.1 模块

#### 模块分类

​	模块成员，根据一些区别，又可以分为三大类： 核心模块、第三方模块、用户自定义模块



#### 核心模块

1. **什么是核心模块：**
   - 随着Node.js的安装包，一同安装到本地的模块，叫做核心模块；
   - 例如：`fs`，`path`等模块，都是由Node.js官方提供的核心模块；
   - 只要大家在计算机中，安装了Node这个应用程序，那么，我们的计算机中就已经安装了所有的 核心模块；
2. **如何使用核心模块**：`require('核心模块标识符')`



#### 第三方模块

1. **什么是第三方模块：**
   - 一些非官方提供的模块，叫做第三方模块；
   - 注意，第三方模块，并不在我们的计算机上；
   - 如果大家需要使用某些第三方模块，必须去一个叫做 `NPM` 的网站上搜索并下载才能使用；
2. **如何使用第三方模块：**
   - 先从 npm 官网上下载指定的第三方模块
   - 使用 `require('第三方模块的名称标识符')`来导入这个模块
   - 根据 第三方模块的 官方文档，尝试使用



#### 自定义模块

1. **什么是用户模块：**
   - 程序员在自己项目中写的 Javascript 文件，就叫做 用户自定义模块；
2. **如何使用用户模块：**`require('路径标识符')`



###5.2 包